<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.555">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Devjyoti Chakrabarti">

<title>Behavioural Economics - Day 3: Bounds of Rationality</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body>

<div id="quarto-search-results"></div>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#recap" id="toc-recap" class="nav-link active" data-scroll-target="#recap">Recap</a></li>
  <li><a href="#todays-agenda" id="toc-todays-agenda" class="nav-link" data-scroll-target="#todays-agenda">Today’s Agenda</a></li>
  <li><a href="#bounded-rationality" id="toc-bounded-rationality" class="nav-link" data-scroll-target="#bounded-rationality">Bounded Rationality</a></li>
  <li><a href="#saving-heuristics-and-contribution-retirement-plans2" id="toc-saving-heuristics-and-contribution-retirement-plans2" class="nav-link" data-scroll-target="#saving-heuristics-and-contribution-retirement-plans2">Saving Heuristics and Contribution Retirement Plans</a></li>
  <li><a href="#heuristics-and-bias" id="toc-heuristics-and-bias" class="nav-link" data-scroll-target="#heuristics-and-bias">Heuristics and Bias</a></li>
  <li><a href="#anchoring-bias" id="toc-anchoring-bias" class="nav-link" data-scroll-target="#anchoring-bias">Anchoring Bias</a></li>
  <li><a href="#example-judgements-of-life-satisfaction3" id="toc-example-judgements-of-life-satisfaction3" class="nav-link" data-scroll-target="#example-judgements-of-life-satisfaction3">Example: Judgements of Life Satisfaction</a></li>
  <li><a href="#availability-bias" id="toc-availability-bias" class="nav-link" data-scroll-target="#availability-bias">Availability Bias</a></li>
  <li><a href="#example-disaster-insurance45" id="toc-example-disaster-insurance45" class="nav-link" data-scroll-target="#example-disaster-insurance45">Example: Disaster Insurance</a></li>
  <li><a href="#representativeness-bias" id="toc-representativeness-bias" class="nav-link" data-scroll-target="#representativeness-bias">Representativeness Bias</a></li>
  <li><a href="#example-feminist-bank-tellers6" id="toc-example-feminist-bank-tellers6" class="nav-link" data-scroll-target="#example-feminist-bank-tellers6">Example: Feminist Bank Tellers</a></li>
  <li><a href="#overconfidence-bias" id="toc-overconfidence-bias" class="nav-link" data-scroll-target="#overconfidence-bias">Overconfidence Bias</a></li>
  <li><a href="#example-above-average-mba-students8" id="toc-example-above-average-mba-students8" class="nav-link" data-scroll-target="#example-above-average-mba-students8">Example: Above average MBA students?</a></li>
  <li><a href="#staus-quo-bias" id="toc-staus-quo-bias" class="nav-link" data-scroll-target="#staus-quo-bias">Staus Quo Bias</a></li>
  <li><a href="#example-retirement-savings-plans9" id="toc-example-retirement-savings-plans9" class="nav-link" data-scroll-target="#example-retirement-savings-plans9">Example: Retirement Savings Plans</a></li>
  <li><a href="#commitment-biassunk-cost-fallacy" id="toc-commitment-biassunk-cost-fallacy" class="nav-link" data-scroll-target="#commitment-biassunk-cost-fallacy">Commitment Bias/Sunk Cost Fallacy</a></li>
  <li><a href="#example-nba-drafts-and-playing-time10" id="toc-example-nba-drafts-and-playing-time10" class="nav-link" data-scroll-target="#example-nba-drafts-and-playing-time10">Example: NBA drafts and Playing Time</a></li>
  <li><a href="#gamblers-fallacymonte-carlo-fallacy" id="toc-gamblers-fallacymonte-carlo-fallacy" class="nav-link" data-scroll-target="#gamblers-fallacymonte-carlo-fallacy">Gambler’s Fallacy/Monte Carlo fallacy</a></li>
  <li><a href="#authority-bias" id="toc-authority-bias" class="nav-link" data-scroll-target="#authority-bias">Authority Bias</a></li>
  <li><a href="#example-milgram-experiment" id="toc-example-milgram-experiment" class="nav-link" data-scroll-target="#example-milgram-experiment">Example: Milgram Experiment</a></li>
  <li><a href="#conclusion" id="toc-conclusion" class="nav-link" data-scroll-target="#conclusion">Conclusion</a></li>
  </ul>
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="bounds_of_rationality.html"><i class="bi bi-file-slides"></i>RevealJS</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Day 3: Bounds of Rationality</h1>
</div>


<div class="quarto-title-meta-author">
  <div class="quarto-title-meta-heading">Author</div>
  <div class="quarto-title-meta-heading">Affiliation</div>
  
    <div class="quarto-title-meta-contents">
    <p class="author">Devjyoti Chakrabarti </p>
  </div>
  <div class="quarto-title-meta-contents">
        <p class="affiliation">
            University of Oxford
          </p>
      </div>
  </div>

<div class="quarto-title-meta">

      
  
    
  </div>
  


</header>


<section id="recap" class="level3">
<h3 class="anchored" data-anchor-id="recap">Recap</h3>
<ul>
<li><p>There is a divergence between the predictions of standard economics models and observed human behaviour</p></li>
<li><p>The assumption of rationality has its limits; bounded willpower, self-interest, rationality</p></li>
<li><p>Expected Utility Theory</p></li>
<li><p>Framing effects</p></li>
</ul>
</section>
<hr>
<section id="todays-agenda" class="level3">
<h3 class="anchored" data-anchor-id="todays-agenda">Today’s Agenda</h3>
<ul>
<li><p>Explore bounded rationality and its implications</p></li>
<li><p>Understand some important cognitive biases</p></li>
</ul>
</section>
<hr>
<div>
<ul>
<li><p>Maslow’s hierarchy of needs</p>
<p><img src="images/clipboard-3609277338.png" class="img-fluid"></p></li>
</ul>
</div>
<hr>
<section id="bounded-rationality" class="level3">
<h3 class="anchored" data-anchor-id="bounded-rationality">Bounded Rationality</h3>
<ul>
<li><p>“Since we have only so much brainpower, and only so much time, we cannot be expected to solve difficult problems optimally. It is eminently “rational” for people to adopt rules of thumb as a way to economize on cognitive faculties. Yet the standard model ignores these bounds and hence the heuristics commonly used. “<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a></p></li>
<li><p>Example: Carbon offsets</p></li>
<li><p>Caution: Although useful, rules of thumb/heuristics can lead to systematic biases and problems.</p></li>
</ul>
</section>
<hr>
<section id="saving-heuristics-and-contribution-retirement-plans2" class="level3">
<h3 class="anchored" data-anchor-id="saving-heuristics-and-contribution-retirement-plans2">Saving Heuristics and Contribution Retirement Plans<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a></h3>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/clipboard-2379035768.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="652"></p>
</figure>
</div>
</section>
<hr>
<section id="heuristics-and-bias" class="level3" style="font-size: 0.875em">
<h3 class="anchored" data-anchor-id="heuristics-and-bias">Heuristics and Bias</h3>
<ul>
<li><p>There are numerous examples of these heuristics and cognitive biases. We are going to focus in this lecture on the following types of bias:</p>
<ol type="1">
<li><p>Anchoring</p></li>
<li><p>Availability</p></li>
<li><p>Representativeness</p></li>
<li><p>Overconfidence</p></li>
<li><p>Status Quo</p></li>
<li><p>Commitment</p></li>
<li><p>Gambler’s Fallacy</p></li>
<li><p>Authority</p></li>
<li><p>Herding</p></li>
</ol></li>
</ul>
</section>
<hr>
<section id="anchoring-bias" class="level3">
<h3 class="anchored" data-anchor-id="anchoring-bias">Anchoring Bias</h3>
<ul>
<li><p>The implicit process happening here is anchoring and adjustment. People start with an anchor and then start adjusting in the direction they know.</p></li>
<li><p>The bias occurs because the adjustments are usually insufficient.</p></li>
</ul>
</section>
<hr>
<section id="example-judgements-of-life-satisfaction3" class="level3">
<h3 class="anchored" data-anchor-id="example-judgements-of-life-satisfaction3">Example: Judgements of Life Satisfaction<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a></h3>
<ul>
<li><p>Freshmen and sophomores at the University of Illinois were asked two questions</p>
<ol type="1">
<li><p>How happy are you in your life in general?</p></li>
<li><p>How happy are you with your dating?</p></li>
</ol></li>
<li><p>When asked in this order, the correlations between the two questions was 0.16. But when the order was reversed, the correlation jumped up to 0.55.</p></li>
</ul>
</section>
<hr>
<section id="availability-bias" class="level3">
<h3 class="anchored" data-anchor-id="availability-bias">Availability Bias</h3>
<ul>
<li><p>People rely on immediate examples that come to mind when evaluating a specific topic, decision or method. Inherently if there is something that can be recalled it must be more important than alternative prospects not so easily recalled.</p></li>
<li><p>Example: Biased assessments of risk can perversely influence how we prepare for and respond to crises, business choices, and the political process. Such misperceptions can affect policy, because some governments will allocate their resources in a way that fits with people’s fears rather than in response to the most likely dangers.<br>
</p></li>
</ul>
</section>
<hr>
<section id="example-disaster-insurance45" class="level3 nonincremental" style="font-size: 0.875em">
<h3 class="anchored" data-anchor-id="example-disaster-insurance45">Example: Disaster Insurance<a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a><a href="#fn5" class="footnote-ref" id="fnref5" role="doc-noteref"><sup>5</sup></a></h3>
<ul>
<li><p>In the period immediately after a flood, there is an increase in the purchases of flood insurance. But beyond a point this starts to steadily decline as the memories of the flood begin to fade.</p></li>
<li><p>Moreover, if people know someone who has experienced damages due to a flood, they become much more likely to buy flood insurance for themselves, regardless of how susceptible they are to flood risk.</p></li>
</ul>
</section>
<hr>
<section id="representativeness-bias" class="level3">
<h3 class="anchored" data-anchor-id="representativeness-bias">Representativeness Bias</h3>
<ul>
<li><p>Also called the similarity heuristic. The idea is that when asked to judge how likely it is that A belongs to category B, people answer by asking themselves how similar A is to their image or stereotype of B (that is, how “representative” A is of B).</p></li>
<li><p>Like the other heuristics, while it can work in some situations it can also lead to major errors.<br>
</p></li>
</ul>
</section>
<hr>
<section id="example-feminist-bank-tellers6" class="level3" style="font-size: 0.875em">
<h3 class="anchored" data-anchor-id="example-feminist-bank-tellers6">Example: Feminist Bank Tellers<a href="#fn6" class="footnote-ref" id="fnref6" role="doc-noteref"><sup>6</sup></a></h3>
<ul>
<li><p>Linda is thirty-one years old, single, outspoken, and very bright. She majored in philosophy. As a student, she was deeply concerned with issues of discrimination and social justice and also participated in antinuclear demonstrations.</p>
<ul>
<li>What has a higher probability: Linda is a bank-teller or that Linda is a bank teller and active in the feminist movement?</li>
</ul></li>
<li><p>Most people in the study said that Linda was less likely to be a bank teller than to be a bank teller and active in the feminist movement.</p></li>
</ul>
</section>
<hr>
<section id="overconfidence-bias" class="level3">
<h3 class="anchored" data-anchor-id="overconfidence-bias">Overconfidence Bias</h3>
<ul>
<li><p>This is the “above-average” effect.</p></li>
<li><p>People tend to overestimate their abilities and their personal immunity to harm, distorting decisions regarding risk-taking.</p></li>
<li><p>Example: A study done of professors at the University of Nebraska found that about 94 percent of professors at a large university believed they were better than the average professor.<a href="#fn7" class="footnote-ref" id="fnref7" role="doc-noteref"><sup>7</sup></a><br>
</p></li>
</ul>
</section>
<hr>
<section id="example-above-average-mba-students8" class="level3" style="font-size: 0.875em">
<h3 class="anchored" data-anchor-id="example-above-average-mba-students8">Example: Above average MBA students?<a href="#fn8" class="footnote-ref" id="fnref8" role="doc-noteref"><sup>8</sup></a></h3>
<ul>
<li><p>Richard Thaler before the start of his couse has his students fill out an anonymous survey where one of the questions is “In which decile do you expect to fall in the distribution of grades in this class?”</p></li>
<li><p>Less than 5% of students expect their performance to be below the median and more than half of the class expects to perform in one of the two top deciles.</p></li>
<li><p>Most students in fact put themselves in the second decile. Thaler’s explanation for this is modesty. Students really think they are in the top decile but are too modest to say so.</p></li>
</ul>
</section>
<hr>
<section id="staus-quo-bias" class="level3">
<h3 class="anchored" data-anchor-id="staus-quo-bias">Staus Quo Bias</h3>
<ul>
<li><p>Loss aversion: people dislike losses more than thte like gains. So in many situations, people show a tendency for sticking to the current situation.</p></li>
<li><p>A particular cause of this bias is the “yeah, whatever” heuristic. Example: Netflix TV shows.</p></li>
</ul>
</section>
<hr>
<section id="example-retirement-savings-plans9" class="level3" style="font-size: 0.875em">
<h3 class="anchored" data-anchor-id="example-retirement-savings-plans9">Example: Retirement Savings Plans<a href="#fn9" class="footnote-ref" id="fnref9" role="doc-noteref"><sup>9</sup></a></h3>
<ul>
<li><p>Most participants in retirement savings plans choose asset allocations when they join and then forget about it. A study done in the 80s, looked at the decisions of participants in a pension plan that covered many college professors in the United States. The median number of changes in the asset allocation over a lifetime was zero.</p></li>
<li><p>In other words, over the course of their careers, more than half of the participants made exactly no changes to the way their contributions were being allocated. Perhaps even more telling, many married participants who were single when they joined the plan still had their mothers listed as their beneficiaries!</p></li>
</ul>
</section>
<hr>
<section id="commitment-biassunk-cost-fallacy" class="level3">
<h3 class="anchored" data-anchor-id="commitment-biassunk-cost-fallacy">Commitment Bias/Sunk Cost Fallacy</h3>
<ul>
<li><p>A human behaviour pattern where even in the face of negative outcomes from a decision, action or investment people continue the behaviour instead of altering their decision.</p></li>
<li><p>Find justifications for increased investments into a project based on the cumulative prior investment (“sunk cost”) despite new evidence suggesting that the future cost of continuing the behavior outweighs the expected benefit.</p></li>
</ul>
</section>
<hr>
<section id="example-nba-drafts-and-playing-time10" class="level3">
<h3 class="anchored" data-anchor-id="example-nba-drafts-and-playing-time10">Example: NBA drafts and Playing Time<a href="#fn10" class="footnote-ref" id="fnref10" role="doc-noteref"><sup>10</sup></a></h3>
<ul>
<li>Teams granted more playing time to their most highly drafted players and retained them longer,even after controlling for players’ on-court performance, injuries, trade status, and position played.</li>
</ul>
</section>
<hr>
<section id="gamblers-fallacymonte-carlo-fallacy" class="level3">
<h3 class="anchored" data-anchor-id="gamblers-fallacymonte-carlo-fallacy">Gambler’s Fallacy/Monte Carlo fallacy</h3>
<ul>
<li>It is the belief that, if an event (whose occurrences are independent and identically distributed) has occurred less frequently than expected, it is more likely to happen again in the future (or vice versa).&nbsp;</li>
</ul>
</section>
<hr>
<section id="authority-bias" class="level3">
<h3 class="anchored" data-anchor-id="authority-bias">Authority Bias</h3>
<ul>
<li><p>People are more influenced by opinions spoken by someone with authority and attribute greater accuracy to such opinions.</p></li>
<li><p>People show a tendency to comply when requested/ordered by an authority figure.</p></li>
<li><p>Example: Wikipedia edits</p></li>
</ul>
</section>
<hr>
<section id="example-milgram-experiment" class="level3">
<h3 class="anchored" data-anchor-id="example-milgram-experiment">Example: <a href="https://en.wikipedia.org/wiki/Milgram_experiment" style="text-decoration:none">Milgram Experiment</a></h3>
<ul>
<li><p>Three individuals took part in each session of the experiment:</p>
<ul>
<li><p>The “experimenter”, who was in charge of the session.</p></li>
<li><p>The “teacher”, a volunteer for a single session. The “teachers” were led to believe that they were merely assisting, whereas they were actually the subjects of the experiment.</p></li>
<li><p>The “learner”, an actor and confederate of the experimenter, who pretended to be a volunteer.</p></li>
</ul></li>
</ul>
</section>
<section id="conclusion" class="level3">
<h3 class="anchored" data-anchor-id="conclusion">Conclusion</h3>
<ul>
<li><p>People don’t have unlimited cognitive abilities to make decisions</p></li>
<li><p>To make the decision making process simpler, people rely on heuristics/mental shortcuts</p></li>
<li><p>Although convenient, these shortcuts can be the source of many major errors and biases</p></li>
</ul>
</section>




<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>Mullainathan, Sendhil and Thaler, Richard H., Behavioral Economics (October 2000). NBER Working Paper No.&nbsp;w7948, Available at SSRN:&nbsp;<a href="https://ssrn.com/abstract=245733" class="uri">https://ssrn.com/abstract=245733</a><a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>Benartzi, Shlomo, and Richard Thaler.&nbsp;2007.&nbsp;“Heuristics and Biases in Retirement Savings Behavior.”&nbsp;Journal of Economic Perspectives,&nbsp;21 (3): 81–104<strong>.</strong><a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>Fritz Strack, Leonard L. Martin, and Norbert Schwarz, “Priming and Communication: Social Determinants of Information Use in Judgments of Life Satisfaction,” European Journal of Social Psychology 18, no. 5 (1988): 429–42.<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4"><p>Howard Kunreuther et al., Disaster Insurance Protection: Public Policy Lessons (New York: John Wiley &amp; Sons, 1978)<a href="#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn5"><p>Lo, A. (2013). “The Role of Social Norms in Climate Adaptation: Mediating Risk Perception and Flood Insurance Purchase.” Global Environmental Change 23(5): 1249-1257.<a href="#fnref5" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn6"><p>Amos Tversky and Daniel Kahneman, “Extensional Versus Intuitive Reasoning: The Conjunction Fallacy in Probability Judgment,” Psychological Review 90, no. 4 (1983) 293–315<a href="#fnref6" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn7"><p>Paul C. Price, “Are You as Good a Teacher as You Think?” Thought &amp; Action, Fall 2006, <a href="https://csm.fresnostate.edu/psych/documents/research/Price_2006.pdf" class="uri">https://csm.fresnostate.edu/psych/documents/research/Price_2006.pdf</a><a href="#fnref7" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn8"><p>Thaler, R. H., &amp; Sunstein, C. R. (2021). Nudge: The Final Edition. Penguin Publishing.<a href="#fnref8" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn9"><p>Samuelson and Zeckhauser, “Status Quo Bias in Decision Making.<a href="#fnref9" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn10"><p>Staw, B. M., &amp; Hoang, H. (1995). Sunk cost in the NBA: Why draft order affects playing time and survival in pro-fessional basketball. Administrative Science Quarterly, 40, 474–493<a href="#fnref10" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>